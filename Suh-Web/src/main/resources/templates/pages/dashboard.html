<!-- src/main/resources/templates/pages/dashboard.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head(title='대시보드-SAECHAN-LAB')}"></head>
<body class="dashboard-page">
<div th:replace="~{fragments/header :: header}"></div>

<div class="ui container" id="main-content">
  <!-- 스켈레톤 로딩 컨테이너 - 페이지 로딩 시 임시 표시 -->
  <div id="skeleton-container">
    <!-- 메인 대시보드 스켈레톤 -->
    <div class="ui segment skeleton">
      <div class="skeleton skeleton-header-large"></div>
      <div class="skeleton skeleton-text-medium"></div>
    </div>
    
    <!-- 공지사항 스켈레톤 -->
    <div class="ui segment skeleton">
      <div class="skeleton skeleton-header-medium"></div>
      <div class="skeleton skeleton-text-small"></div>
      <div class="ui items">
        <div class="item skeleton-notice" th:each="i : ${#numbers.sequence(1, 3)}">
          <div class="content">
            <div class="header skeleton"></div>
            <div class="meta skeleton"></div>
            <div class="description skeleton"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 기능 목록 카드 스켈레톤 -->
    <div class="ui segment skeleton">
      <div class="skeleton skeleton-header-medium"></div>
      <div class="skeleton skeleton-text-small"></div>
      <div class="ui four column doubling stackable grid">
        <div class="column" th:each="i : ${#numbers.sequence(1, 4)}">
          <div class="ui fluid card skeleton-card">
            <div class="content">
              <div class="header skeleton"></div>
              <div class="meta skeleton"></div>
              <div class="description skeleton"></div>
            </div>
            <div class="extra content">
              <div class="button skeleton"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 실제 콘텐츠 - 로딩 후 표시 -->
  <div id="real-content" class="hide">
    <!-- 메인 대시보드 헤더 -->
    <div class="ui segment">
      <h2 class="ui header">새찬 서버 실험실</h2>
      
      <!-- 공지사항 섹션 - 메인 헤더 바로 아래에 배치 -->
      <div class="ui divider"></div>
      <h6 class="ui horizontal divider header">
        <i class="bullhorn icon"></i>
        Notice
      </h6>
      
      <!-- 공지사항 아코디언 -->
      <div class="ui styled fluid accordion" id="notice-accordion">
        <!-- 공지사항이 여기에 동적으로 로드됩니다 -->
        <div class="notice-empty">
          <div class="title">
            <i class="info circle icon"></i>
            등록된 공지사항이 없습니다.
          </div>
          <div class="content">
            <p>새로운 공지사항이 등록되면 이곳에 표시됩니다.</p>
          </div>
        </div>
      </div>
      
      <!-- 공지사항 페이지네이션 -->
      <div class="ui center aligned container notice-pagination hide" style="margin-top: 1em;">
        <div class="ui mini pagination menu">
          <!-- 페이지네이션은 동적으로 생성됩니다 -->
        </div>
      </div>
    </div>

    <!-- 유틸리티 애플리케이션 섹션 - 개발 도구 모음 -->
    <div class="ui segment">
      <h3 class="dashboard-section-header">UTILITY APPLICATION</h3>
      <p class="dashboard-section-description">개발 유틸리티 도구</p>
      <div class="ui four column doubling stackable grid">
        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="github icon"></i> 깃헙 이슈 도우미
              </div>
              <div class="meta">
                <span class="category">SUH-PROJECT</span>
              </div>
              <div class="description">
                커밋, 브랜치 자동 생성
              </div>
            </div>
            <div class="extra content">
              <a href="/issue-helper" class="ui blue fluid button shortcut-btn" target="_blank">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>


        <!-- 컨테이너 로그 -->
        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="terminal icon"></i>컨테이너 로그
                <span class="ui red tiny label" style="margin-left:6px;">NEW</span>
              </div>
              <div class="meta">
                <span class="category">Docker</span>
              </div>
              <div class="description">
                실시간 로그 스트리밍
              </div>
            </div>
            <div class="extra content">
              <a href="/docker-logs" class="ui blue fluid button shortcut-btn">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="comment alternate icon"></i> OpenAI 챗봇
              </div>
              <div class="meta">
                <span class="category">AI Assistant</span>
              </div>
              <div class="description">
                (비싸서) 무기한 중단
              </div>
            </div>
            <div class="extra content">
              <a href="https://chat.suhsaechan.me" class="ui blue fluid button shortcut-btn" target="_blank">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="chrome icon"></i> 원격 크롬
              </div>
              <div class="meta">
                <span class="category">Server Chrome</span>
              </div>
              <div class="description">
                외부 크롬 원격 접속
              </div>
            </div>
            <div class="extra content">
              <a href="https://web.suhsaechan.me" class="ui blue fluid button shortcut-btn" target="_blank">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="language icon"></i>커스텀 AI 번역기
              </div>
              <div class="meta">
                <span class="category">커스텀 API</span>
              </div>
              <div class="description">
                API 사용 가능
              </div>
            </div>
            <div class="extra content">
              <a href="/translator" class="ui blue fluid button shortcut-btn" target="_blank">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="ui fluid card equal-height-card">
            <div class="content">
              <div class="header">
                <i class="book icon"></i>스터디 플랜
                <span class="ui red tiny label" style="margin-left:6px;">NEW</span>
              </div>
              <div class="meta">
                <span class="category">Study Management</span>
              </div>
              <div class="description">
                마크다운 지원 스터디 노트
              </div>
            </div>
            <div class="extra content">
              <a href="/study-management" class="ui blue fluid button shortcut-btn">
                <i class="arrow right icon"></i>
                <span>바로가기</span>
              </a>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- CUSTOM CHATGPT 섹션 - AI 모델 모음 -->
    <div class="ui segment">
      <h3 class="dashboard-section-header">CUSTOM CHATGPT</h3>
      <p class="dashboard-section-description">일상이 딸깍의 연속! 커스텀 AI 모델</p>
     <!-- Project GPT 섹션 - 개발 관련 GPT -->
      <div class="dashboard-project-section">
        <h4 class="dashboard-project-title">
          <i class="code icon"></i> PROJECT GPT </h4>
        <div class="ui four column doubling stackable grid">
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <i class="code icon"></i>Swaager Docs 생성기
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Controller, Service, Repo, Dto
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-67a7a4cd31b48191a2396587469393d1-swaggerdocmaster" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <i class="code icon"></i>TypeScript API 변환기
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Spring > Typescript
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-67da95f653408191ac02737509ae51c7-taibseukeuribteu-api-taib-byeonhwangi" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <i class="code icon"></i>변수명 초고수 변환기
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  변수명 확실하게 알려줌
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-67ee500ea598819188408e9e78a48c35-byeonsumyeong-co-jeonmunga" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Somansa GPT 섹션 - 소만사 관련 GPT -->
      <div class="dashboard-project-section">
        <h4 class="dashboard-project-title">
          <img src="/images/소만사_로고.png" alt="소만사 로고" class="ui mini image u-margin-right-tiny">
          SOMANSA GPT </h4>
        <div class="ui four column doubling stackable grid">
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/소만사_로고.png" alt="소만사 로고" class="ui mini image u-margin-right-tiny">
                  CM Tag Creator
                </div>
                <div class="meta">
                  <span class="category">Somansa 소만사</span>
                </div>
                <div class="description">
                  다국어 Tag Coder
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-67318f071e688190a355c62acf5033de-cm-taegeu-saengseonggi" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/소만사_로고.png" alt="소만사 로고" class="ui mini image u-margin-right-tiny">
                  CM Branch Creator
                </div>
                <div class="meta">
                  <span class="category">Somansa 소만사</span>
                </div>
                <div class="description">
                  일감 Info > 브랜치, 커밋 Msg
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-6732dd6bcb7481908383eadad53fef7a-cm-beuraencimyeong-saengseonggi" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/소만사_로고.png" alt="소만사 로고" class="ui mini image u-margin-right-tiny">
                  Issue PPT Guide
                </div>
                <div class="meta">
                  <span class="category">Somansa 소만사</span>
                </div>
                <div class="description">
                  일감 Info > PPT Template
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-675a4ac37ae081918b3f3239c0432672-somansa-pptgyehoegseo-saengseonggi" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/소만사_로고.png" alt="소만사 로고" class="ui mini image u-margin-right-tiny">
                  SpringBooster
                </div>
                <div class="meta">
                  <span class="category">Somansa 소만사</span>
                </div>
                <div class="description">
                  Spring Improve Strategy By PPT
                </div>
              </div>
              <div class="extra content">
                <a href="https://chatgpt.com/g/g-67ce2f8e22808191a917c325d33b5e91-springbooster" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- PROJECTS 섹션 - 진행 중인 프로젝트 리소스 -->
    <div class="ui segment">
      <h3 class="dashboard-section-header">PROJECTS</h3>
      <p class="dashboard-section-description">진행 중인 프로젝트 및 관련 리소스</p>

      <!-- SEJONG-MALSAMI 프로젝트 섹션 -->
      <div class="dashboard-project-section">
        <h4 class="dashboard-project-title">
          <img src="/images/세종말싸미_로고.png" alt="세종말싸미 로고" class="ui mini image u-margin-right-tiny">
          SEJONG-MALSAMI </h4>
        <div class="ui four column doubling stackable grid">
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/세종말싸미_로고.png" alt="세종말싸미 로고" class="ui mini image u-margin-right-tiny">
                  메인 페이지
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  세종말싸미 메인 페이지
                </div>
              </div>
              <div class="extra content">
                <a href="https://test.sejong-malsami.co.kr" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/세종말싸미_로고.png" alt="세종말싸미 로고" class="ui mini image u-margin-right-tiny">
                  Swagger Docs
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  세종말싸미 Swagger Docs
                </div>
              </div>
              <div class="extra content">
                <a href="https://api.sejong-malsami.co.kr/docs/swagger-ui/index.html#/" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/세종말싸미_로고.png" alt="세종말싸미 로고" class="ui mini image u-margin-right-tiny">
                  관리자 페이지
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  세종말싸미 관리자 페이지
                </div>
              </div>
              <div class="extra content">
                <a href="https://api.sejong-malsami.co.kr" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
          
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/icons/figmaLogo.svg" alt="Figma" class="figma-logo">
                  Figma 디자인 (Test)
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  세종말싸미 테스트 디자인
                </div>
              </div>
              <div class="extra content">
                <a href="https://www.figma.com/design/g3TWHt8CvADqj2fXcf9uIA/%EC%84%B8%EC%A2%85%EB%B0%9C%EC%8B%B8%EB%AF%B9-%EB%94%94%EC%9E%90%EC%9D%B8?node-id=0-1&p=f&t=LubXbhTDNNRuyQK6-0" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
          
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/icons/figmaLogo.svg" alt="Figma" class="figma-logo">
                  Figma 디자인 (Prod)
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  아직 미정
                </div>
              </div>
              <div class="extra content">
                <span class="ui grey fluid button shortcut-btn">
                  <i class="clock icon"></i>
                  <span>준비 중</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PLANE ACCIDENT FINDER 프로젝트 섹션 -->
      <div class="dashboard-project-section">
        <h4 class="dashboard-project-title">
          <img src="/images/PLANE_ACCIDENT_FINDER_로고.png" alt="PLANE_ACCIDENT_FINDER_로고" class="ui mini image u-margin-right-tiny">
          PLANE ACCIDENT FINDER </h4>
        <div class="ui four column doubling stackable grid">
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/PLANE_ACCIDENT_FINDER_로고.png" alt="PLANE_ACCIDENT_FINDER_로고" class="ui mini image u-margin-right-tiny">
                  DOWNLOAD APK
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  APK Download Page
                </div>
              </div>
              <div class="extra content">
                <a href="http://suh-project.synology.me/plane-accident-finder/" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/PLANE_ACCIDENT_FINDER_로고.png" alt="PLANE_ACCIDENT_FINDER_로고" class="ui mini image u-margin-right-tiny">
                  HTTPS Swagger
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Swagger Docs
                </div>
              </div>
              <div class="extra content">
                <a href="https://api.romrom.xyz/docs/swagger-ui/index.html" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/PLANE_ACCIDENT_FINDER_로고.png" alt="PLANE_ACCIDENT_FINDER_로고" class="ui mini image u-margin-right-tiny">
                  HTTP Swagger
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Swagger Docs
                </div>
              </div>
              <div class="extra content">
                <a href="http://suh-project.synology.me:8082/docs/swagger-ui/index.html#/" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ROM ROM 프로젝트 섹션 -->
      <div class="dashboard-project-section">
        <h4 class="dashboard-project-title">
          <img src="/images/ROMROM_로고.png" alt="ROM ROM 로고" class="ui mini image u-margin-right-tiny">
          ROM ROM </h4>
        <div class="ui four column doubling stackable grid">
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/ROMROM_로고.png" alt="ROM ROM 로고" class="ui mini image u-margin-right-tiny">
                  DOWNLOAD APK
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  [CICD] APK Download Page
                </div>
              </div>
              <div class="extra content">
                <a href="http://suh-project.synology.me/romrom" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/ROMROM_로고.png" alt="ROM ROM 로고" class="ui mini image u-margin-right-tiny">
                  HTTPS Swagger
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Swagger Docs
                </div>
              </div>
              <div class="extra content">
                <a href="https://api.romrom.xyz/docs/swagger-ui/index.html" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>

          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/images/ROMROM_로고.png" alt="ROM ROM 로고" class="ui mini image u-margin-right-tiny">
                  HTTP Swagger
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  Swagger Docs
                </div>
              </div>
              <div class="extra content">
                <a href="http://suh-project.synology.me:8085/docs/swagger-ui/index.html#/" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
          
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/icons/figmaLogo.svg" alt="Figma" class="figma-logo">
                  Figma 디자인 (Test)
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  롬롬 테스트 디자인
                </div>
              </div>
              <div class="extra content">
                <a href="https://www.figma.com/design/qXvwG0b5GYk9xkzgw9fdhb/%EB%A1%AC%EB%A1%AC-%ED%9A%8C%EC%9D%98?node-id=2049-5172&t=TFPO78n7GC2JipNk-0" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
          
          <div class="column">
            <div class="ui fluid card equal-height-card">
              <div class="content">
                <div class="header">
                  <img src="/icons/figmaLogo.svg" alt="Figma" class="figma-logo">
                  Figma 디자인 (Prod)
                </div>
                <div class="meta">
                  <span class="category">SUH-PROJECT</span>
                </div>
                <div class="description">
                  롬롬 프로덕션 디자인
                </div>
              </div>
              <div class="extra content">
                <a href="https://www.figma.com/design/dq4HUUqmTlVkmWr4cd2RE5/%F0%9F%94%84-romrom?node-id=1344-2435&t=lbULaVU0rbuntb79-0" class="ui blue fluid button shortcut-btn" target="_blank">
                  <i class="arrow right icon"></i>
                  <span>바로가기</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<!-- 공지사항 상세 모달 -->
<div class="ui small modal" id="notice-detail-modal">
  <i class="close icon"></i>
  <div class="header" id="modal-notice-title"></div>
  <div class="content">
    <div class="ui stackable grid">
      <div class="eight wide column">
        <p><i class="user icon"></i> <span id="modal-notice-author"></span></p>
        <p><i class="calendar icon"></i> <span id="modal-notice-date"></span></p>
      </div>
      <div class="eight wide column">
        <p><i class="eye icon"></i> 조회수: <span id="modal-notice-views"></span></p>
        <p id="modal-notice-important" class="hide">
          <i class="exclamation circle red icon"></i> <strong>중요 공지사항</strong>
        </p>
      </div>
    </div>
    <div class="ui divider"></div>
    <div class="ui basic segment" id="modal-notice-content"></div>
    
    <!-- 댓글 섹션 -->
    <div class="ui divider"></div>
    <h4 class="ui header"><i class="comments icon"></i>댓글</h4>
    
    <!-- 댓글 목록 -->
    <div class="ui comments" id="comment-list">
      <div id="comments-loading" class="ui active centered inline loader"></div>
      <div id="no-comments-message" class="ui message hide">
        <p>아직 댓글이 없습니다. 첫 번째 댓글을 작성해보세요!</p>
      </div>
    </div>
    
    <!-- 댓글 작성 폼 -->
    <form class="ui reply form" id="comment-form">
      <div class="field">
        <div class="ui fluid action input">
          <input type="text" id="comment-author" placeholder="이름을 입력하세요 (선택사항)">
        </div>
      </div>
      <div class="field">
        <textarea id="comment-content" placeholder="댓글을 입력하세요" rows="3"></textarea>
      </div>
      <button type="button" id="comment-submit" class="ui blue labeled submit icon button">
        <i class="icon edit"></i> 댓글 작성
      </button>
    </form>
  </div>
  <div class="actions">
    <div class="ui positive button">확인</div>
  </div>
</div>

<script>
  $(document).ready(function() {
    // 드롭다운 메뉴 초기화
    $('.ui.dropdown').dropdown();
    
    // 공지사항 로드
    loadActiveNotices();
    
    // 페이지 로딩 효과
    setTimeout(function() {
      document.getElementById('skeleton-container').classList.add('hide');
      document.getElementById('real-content').classList.remove('hide');
      
      // 아코디언 초기화 - 기본적으로 모두 닫힌 상태로 시작
      $('.ui.accordion').accordion({
        exclusive: false,
        closeNested: true
      });
    }, 500); // 0.5초 후 실제 콘텐츠로 전환
    
    // 페이지네이션 클릭 이벤트
    $(document).on('click', '.notice-pagination .item', function(e) {
      e.preventDefault();
      if (!$(this).hasClass('active') && !$(this).hasClass('disabled')) {
        const page = $(this).data('page');
        loadActiveNoticesByPage(page);
      }
    });
  });
  
  // 전역 변수 - 공지사항 데이터 및 페이지네이션 상태
  let noticeData = {
    notices: [],
    currentPage: 1,
    totalPages: 1,
    noticesPerPage: 5
  };
  
  // 활성화된 공지사항 로드 함수
  function loadActiveNotices() {
    // 공통 함수 사용
    sendFormRequest(
      '/api/notice/get/active',
      null,
      function(response) {
        if (response && response.notices && response.notices.length > 0) {
          // 공지사항 데이터 저장
          noticeData.notices = response.notices;
          
          // 중요 공지사항 먼저 정렬
          noticeData.notices.sort(function(a, b) {
            if (a.isImportant && !b.isImportant) return -1;
            if (!a.isImportant && b.isImportant) return 1;
            return new Date(b.createdDate) - new Date(a.createdDate);
          });
          
          // 총 페이지 수 계산
          noticeData.totalPages = Math.ceil(noticeData.notices.length / noticeData.noticesPerPage);
          
          // 첫 페이지 로드
          loadActiveNoticesByPage(1);
        } else {
          // 공지사항이 없으면 기본 메시지 표시
          $('#notice-accordion').html(`
            <div class="title">
              <i class="info circle icon"></i>
              등록된 공지사항이 없습니다.
            </div>
            <div class="content">
              <p>새로운 공지사항이 등록되면 이곳에 표시됩니다.</p>
            </div>
          `);
          
          // 페이지네이션 숨김
          $('.notice-pagination').addClass('hide');
          
          // 아코디언 초기화
          $('#notice-accordion').accordion('refresh');
        }
      },
      function(xhr, status, error) {
        console.error('공지사항 로드 오류:', error);
        $('#notice-accordion').html(`
          <div class="title">
            <i class="warning circle icon"></i>
            공지사항을 불러올 수 없습니다.
          </div>
          <div class="content">
            <p>서버 오류가 발생했습니다. 나중에 다시 시도해주세요.</p>
          </div>
        `);
        
        // 페이지네이션 숨김
        $('.notice-pagination').addClass('hide');
        
        // 아코디언 초기화
        $('#notice-accordion').accordion('refresh');
      }
    );
  }
  
  // 페이지별 공지사항 표시 함수
  function loadActiveNoticesByPage(page) {
    // 현재 페이지 업데이트
    noticeData.currentPage = page;
    
    // 페이지에 해당하는 공지사항만 추출
    const startIndex = (page - 1) * noticeData.noticesPerPage;
    const endIndex = Math.min(startIndex + noticeData.noticesPerPage, noticeData.notices.length);
    const pageNotices = noticeData.notices.slice(startIndex, endIndex);
    
    // 공지사항 아코디언 비우기
    $('#notice-accordion').empty();
    
    // 공지사항 표시
    if (pageNotices.length > 0) {
      pageNotices.forEach(function(notice) {
        const isImportant = notice.isImportant ? 
          '<div class="ui red mini label">중요</div> ' : '';
        
        const noticeItem = `
          <div class="title" data-id="${notice.noticeId}">
            <i class="dropdown icon"></i>
            ${isImportant}${notice.title}
            <div class="notice-meta-inline">
              <span class="notice-author"><i class="user outline icon"></i>${notice.author || '관리자'}</span>
              <span class="notice-date"><i class="calendar outline icon"></i>${timeAgo(notice.createdDate)}</span>
            </div>
          </div>
          <div class="content">
            <div class="notice-meta">
              <span><i class="user outline icon"></i> ${notice.author || '관리자'}</span>
              <span><i class="calendar outline icon"></i> ${new Date(notice.createdDate).toLocaleDateString()}</span>
              <span><i class="eye outline icon"></i> 조회수 ${notice.viewCount || 0}</span>
            </div>
            <p class="notice-preview">${notice.content.substring(0, 150)}${notice.content.length > 150 ? '...' : ''}</p>
            <div class="ui right aligned container">
              <button class="ui mini blue button view-notice-btn" data-id="${notice.noticeId}">
                <i class="eye icon"></i> 상세보기
              </button>
            </div>
          </div>
        `;
        
        $('#notice-accordion').append(noticeItem);
      });
      
      // 상세보기 버튼 이벤트 바인딩
      $('.view-notice-btn').click(function(e) {
        e.stopPropagation(); // 아코디언 토글 방지
        const noticeId = $(this).data('id');
        showNoticeDetail(noticeId);
      });
      
      // 페이지네이션 업데이트
      updatePagination();
      
      // 5개 이상이면 페이지네이션 표시
      if (noticeData.notices.length > noticeData.noticesPerPage) {
        $('.notice-pagination').removeClass('hide');
      } else {
        $('.notice-pagination').addClass('hide');
      }
    } else {
      // 공지사항이 없으면 기본 메시지 표시
      $('#notice-accordion').html(`
        <div class="title">
          <i class="info circle icon"></i>
          등록된 공지사항이 없습니다.
        </div>
        <div class="content">
          <p>새로운 공지사항이 등록되면 이곳에 표시됩니다.</p>
        </div>
      `);
      
      // 페이지네이션 숨김
      $('.notice-pagination').addClass('hide');
    }
    
    // 아코디언 초기화 - 기본적으로 모두 닫힌 상태로 시작
    $('#notice-accordion').accordion('refresh');
  }
  
  // 페이지네이션 업데이트 함수
  function updatePagination() {
    const paginationContainer = $('.notice-pagination .pagination');
    paginationContainer.empty();
    
    // 페이지가 1개 이하면 페이지네이션 숨김
    if (noticeData.totalPages <= 1) {
      $('.notice-pagination').addClass('hide');
      return;
    }
    
    // 이전 페이지 버튼
    const prevDisabled = noticeData.currentPage === 1 ? 'disabled' : '';
    paginationContainer.append(`
      <a class="item ${prevDisabled}" data-page="${noticeData.currentPage - 1}">
        <i class="angle left icon"></i>
      </a>
    `);
    
    // 페이지 번호 버튼
    for (let i = 1; i <= noticeData.totalPages; i++) {
      const isActive = i === noticeData.currentPage ? 'active' : '';
      paginationContainer.append(`
        <a class="item ${isActive}" data-page="${i}">${i}</a>
      `);
    }
    
    // 다음 페이지 버튼
    const nextDisabled = noticeData.currentPage === noticeData.totalPages ? 'disabled' : '';
    paginationContainer.append(`
      <a class="item ${nextDisabled}" data-page="${noticeData.currentPage + 1}">
        <i class="angle right icon"></i>
      </a>
    `);
  }
  
  // 공지사항 상세 보기 함수
  function showNoticeDetail(noticeId) {
    // 공통 함수 사용
    sendFormRequest(
      '/api/notice/get/detail',
      { noticeId: noticeId },
      function(response) {
        if (response) {
          const notice = response;
          
          // 모달 내용 채우기
          $('#modal-notice-title').text(notice.title).data('id', notice.noticeId);
          $('#modal-notice-author').text(notice.author || '관리자');
          $('#modal-notice-date').text(new Date(notice.createdDate).toLocaleString());
          $('#modal-notice-views').text(notice.viewCount || 0);
          $('#modal-notice-content').html(notice.content.replace(/\n/g, '<br>'));
          
          // 중요 공지사항 표시
          if (notice.isImportant) {
            $('#modal-notice-important').removeClass('hide');
          } else {
            $('#modal-notice-important').addClass('hide');
          }
          
          // 댓글 목록 로드
          loadComments(notice.noticeId);
          
          // 댓글 폼 초기화
          $('#comment-author').val('');
          $('#comment-content').val('');
          
          // 모달 표시
          $('#notice-detail-modal').modal({
            centered: false,
            closable: true
          }).modal('show');
        } else {
          alert('공지사항을 불러올 수 없습니다.');
        }
      },
      function(xhr, status, error) {
        console.error('공지사항 상세 조회 오류:', error);
      }
    );
  }
  
  // 댓글 목록 로드 함수
  function loadComments(noticeId) {
    $('#comments-loading').show();
    $('#comment-list .comment').remove();
    $('#no-comments-message').addClass('hide');
    
    // 댓글 로드 요청
    sendFormRequest(
      '/api/notice/comment/list',
      { noticeId: noticeId },
      function(response) {
        $('#comments-loading').hide();
        
        if (response && response.noticeCommentDtos && response.noticeCommentDtos.length > 0) {
          // 댓글 목록 표시
          response.noticeCommentDtos.forEach(function(comment) {
            const commentHtml = createCommentHtml(comment);
            $('#comment-list').append(commentHtml);
          });
          
          // 댓글 삭제 버튼 이벤트 연결
          $('.delete-comment-btn').click(function() {
            const commentId = $(this).data('id');
            if (confirm('정말로 이 댓글을 삭제하시겠습니까?')) {
              deleteComment(commentId, noticeId);
            }
          });
        } else {
          // 댓글이 없는 경우
          $('#no-comments-message').removeClass('hide');
        }
      },
      function(xhr, status, error) {
        $('#comments-loading').hide();
        console.error('댓글 로드 오류:', error);
        $('#no-comments-message').removeClass('hide')
          .addClass('negative')
          .html('<div class="header">댓글 로드 실패</div><p>댓글을 불러오는 중 오류가 발생했습니다.</p>');
      }
    );
  }
  
  // 댓글 HTML 생성 함수
  function createCommentHtml(comment) {
    const date = new Date(comment.createdDate).toLocaleString();
    const clientHashFromSession = getClientHashFromStorage(); // 세션에 저장된 클라이언트 해시값 가져오기
    const isMyComment = clientHashFromSession && clientHashFromSession === comment.clientHash; // 내 댓글인지 확인
    
    const deleteButton = isMyComment ? 
      `<button class="ui mini red right floated button delete-comment-btn" data-id="${comment.noticeCommentId}">
        <i class="trash icon"></i> 삭제
      </button>` : '';
    
    return `
      <div class="comment modern-comment">
        <div class="avatar">
          <i class="big user circle icon"></i>
        </div>
        <div class="content">
          <div class="comment-header">
            <span class="author">${comment.author}</span>
            ${comment.anonymizedIp ? `<span class="metadata">(${comment.anonymizedIp})</span>` : ''}
            <span class="metadata">${date}</span>
          </div>
          <div class="text">${comment.content}</div>
          <div class="actions">
            ${deleteButton}
          </div>
        </div>
      </div>
    `;
  }
  
  // 클라이언트 해시값 가져오기 (세션 또는 로컬 스토리지에서)
  function getClientHashFromStorage() {
    return sessionStorage.getItem('clientHash');
  }
  
  // 댓글 작성 이벤트
  $(document).on('click', '#comment-submit', function() {
    const noticeId = $('#modal-notice-title').data('id');
    const authorName = $('#comment-author').val() || '익명';
    const content = $('#comment-content').val();
    
    if (!content) {
      alert('댓글 내용을 입력해주세요.');
      return;
    }
    
    // 댓글 등록 요청
    sendFormRequest(
      '/api/notice/comment/create',
      {
        noticeId: noticeId,
        commentAuthor: authorName,
        commentContent: content
      },
      function(response) {
        if (response) {
          // 댓글 작성 성공
          $('#comment-content').val('');
          loadComments(noticeId); // 댓글 목록 새로고침
        } else {
          alert('댓글 등록 실패');
        }
      },
      function(xhr, status, error) {
        alert('댓글 등록 오류: ' + error);
      }
    );
  });
  
  // 댓글 삭제 함수
  function deleteComment(commentId, noticeId) {
    // 댓글 삭제 요청
    sendFormRequest(
      '/api/notice/comment/delete',
      { commentId: commentId },
      function(response) {
        if (response) {
          loadComments(noticeId); // 댓글 목록 새로고침
        } else {
          alert('댓글 삭제 실패');
        }
      },
      function(xhr, status, error) {
        alert('댓글 삭제 오류: ' + error);
      }
    );
  }

</script>
</body>
</html>