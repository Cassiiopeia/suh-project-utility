<!-- src/main/resources/templates/pages/dashboard.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head(title='대시보드-SAECHAN-LAB')}"></head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
<div th:replace="~{fragments/header :: header}"></div>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- 스켈레톤 로딩 컨테이너 -->
  <div id="skeleton-container">
    <!-- 웰컴 스켈레톤 -->
    <div class="mb-8">
      <div class="skeleton h-10 w-80 mb-3"></div>
      <div class="skeleton h-5 w-96"></div>
    </div>
    <!-- 공지사항 스켈레톤 -->
    <div class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <div class="skeleton h-6 w-32 mb-4"></div>
        <div class="space-y-3">
          <div class="skeleton h-16 w-full"></div>
          <div class="skeleton h-16 w-full"></div>
          <div class="skeleton h-16 w-full"></div>
        </div>
      </div>
    </div>
    <!-- 카드 그리드 스켈레톤 -->
    <div class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <div class="skeleton h-7 w-48 mb-2"></div>
        <div class="skeleton h-4 w-32 mb-6"></div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="skeleton h-48 w-full" th:each="i : ${#numbers.sequence(1, 4)}"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- 실제 콘텐츠 -->
  <div id="real-content" class="hidden">
    <!-- 웰컴 + 공지사항 통합 섹션 -->
    <!-- 헤더 섹션 -->
    <section id="header-section" class="mb-6">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">새찬 서버 실험실</h1>
      <p class="text-sm text-gray-600">개발에 대한 나의 방향성을 탐구하는 실험실. 이번엔 뭘 만들어볼까?</p>
    </section>

    <!-- 공지사항 섹션 -->
    <section id="notice-section" class="mb-8">
      <!-- 고정 헤더 (레이블 + 전체보기) -->
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-700">공지사항</h2>
        <a href="/notice" class="text-sm text-gray-500 hover:text-primary transition-colors">
          전체보기 <i class="fa-solid fa-chevron-right text-xs"></i>
        </a>
      </div>

      <!-- 슬라이드 카드 컨테이너 -->
      <div class="notice-cards-container relative overflow-hidden bg-white rounded-lg shadow-md" style="height: 4rem;">
        <div id="notice-cards" class="relative w-full h-full">
          <!-- 로딩 상태 -->
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="loading loading-spinner loading-sm text-primary mr-2"></span>
            <span class="text-gray-400 text-sm">로딩중...</span>
          </div>
        </div>
      </div>
    </section>

    <!-- 서버 통계 Summary 섹션 -->
    <section id="summary-section" class="mb-8">
      <!-- Summary 헤더 (새로고침 버튼 포함) -->
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-800">서버 통계</h2>
        <button id="refresh-summary-btn" onclick="refreshDashboardSummary()" class="btn btn-sm btn-ghost btn-circle" title="통계 새로고침">
          <i class="fa-solid fa-arrows-rotate text-gray-500"></i>
        </button>
      </div>
      <!-- Summary 스켈레톤 -->
      <div id="summary-skeleton" class="dashboard-card-grid-5">
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-5">
          <div class="flex items-center gap-4">
            <div class="skeleton w-12 h-12 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-3 w-16 mb-2"></div>
              <div class="skeleton h-6 w-12 mb-1"></div>
              <div class="skeleton h-3 w-20"></div>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-5">
          <div class="flex items-center gap-4">
            <div class="skeleton w-12 h-12 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-3 w-16 mb-2"></div>
              <div class="skeleton h-6 w-12 mb-1"></div>
              <div class="skeleton h-3 w-20"></div>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-5">
          <div class="flex items-center gap-4">
            <div class="skeleton w-12 h-12 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-3 w-16 mb-2"></div>
              <div class="skeleton h-6 w-12 mb-1"></div>
              <div class="skeleton h-3 w-20"></div>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-5">
          <div class="flex items-center gap-4">
            <div class="skeleton w-12 h-12 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-3 w-16 mb-2"></div>
              <div class="skeleton h-6 w-12 mb-1"></div>
              <div class="skeleton h-3 w-20"></div>
            </div>
          </div>
        </div>
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-5">
          <div class="flex items-center gap-4">
            <div class="skeleton w-12 h-12 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-3 w-16 mb-2"></div>
              <div class="skeleton h-6 w-12 mb-1"></div>
              <div class="skeleton h-3 w-20"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary 실제 콘텐츠 -->
      <div id="summary-content" class="hidden">
        <div class="dashboard-card-grid-5">
          <!-- 방문자 통계 -->
          <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0">
                  <i class="fa-solid fa-users text-blue-600 text-xl"></i>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-gray-500 font-medium mb-1">총 방문자</p>
                  <p class="text-2xl font-bold text-gray-900" id="stat-total-visitors">-</p>
                  <p class="text-xs text-gray-400">오늘: <span id="stat-today-visitors" class="text-green-600 font-medium">+0</span></p>
                </div>
              </div>
            </div>
          </div>

          <!-- 챗봇 통계 -->
          <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center flex-shrink-0">
                  <i class="fa-solid fa-comments text-purple-600 text-xl"></i>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-gray-500 font-medium mb-1">챗봇 메시지</p>
                  <p class="text-2xl font-bold text-gray-900" id="stat-total-chats">-</p>
                  <p class="text-xs text-gray-400">오늘: <span id="stat-today-chats" class="text-green-600 font-medium">+0</span></p>
                </div>
              </div>
            </div>
          </div>

          <!-- 토큰 사용량 -->
          <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0">
                  <i class="fa-solid fa-bolt text-amber-600 text-xl"></i>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-gray-500 font-medium mb-1">토큰 사용량</p>
                  <p class="text-2xl font-bold text-gray-900" id="stat-total-tokens">-</p>
                  <p class="text-xs text-gray-400">오늘: <span id="stat-today-tokens" class="text-green-600 font-medium">+0</span></p>
                </div>
              </div>
            </div>
          </div>

          <!-- 모든 페이지 조회수 -->
          <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-lg bg-indigo-100 flex items-center justify-center flex-shrink-0">
                  <i class="fa-solid fa-globe text-indigo-600 text-xl"></i>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-gray-500 font-medium mb-1">모든 페이지 조회</p>
                  <p class="text-2xl font-bold text-gray-900" id="stat-total-page-views">-</p>
                  <p class="text-xs text-gray-400">오늘: <span id="stat-today-page-views" class="text-green-600 font-medium">+0</span></p>
                </div>
              </div>
            </div>
          </div>

          <!-- 프로필 페이지 조회수 -->
          <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-lg bg-pink-100 flex items-center justify-center flex-shrink-0">
                  <i class="fa-solid fa-user text-pink-600 text-xl"></i>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-gray-500 font-medium mb-1">프로필 조회</p>
                  <p class="text-2xl font-bold text-gray-900" id="stat-total-profile-views">-</p>
                  <p class="text-xs text-gray-400">오늘: <span id="stat-today-profile-views" class="text-green-600 font-medium">+0</span></p>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- 기능별 상세 통계 -->
        <div class="mt-4">
          <h3 class="text-sm font-medium text-gray-700 mb-3">
            <i class="fa-solid fa-chart-bar mr-2 text-gray-500"></i>
            기능별 상세 통계
          </h3>
          <div class="dashboard-card-grid-5">
            <!-- 세종대 인증 -->
            <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
              <div class="card-body p-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-graduation-cap text-blue-600"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <p class="text-xs text-gray-500 font-medium mb-1">세종대 인증</p>
                    <p class="text-lg font-bold text-gray-900" id="stat-total-sejong-auth">-</p>
                    <p class="text-xs text-gray-400">오늘: <span id="stat-today-sejong-auth" class="text-green-600 font-medium">+0</span></p>
                  </div>
                </div>
              </div>
            </div>
            <!-- SUH 랜덤 -->
            <div class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow duration-200">
              <div class="card-body p-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 rounded-lg bg-rose-100 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-dice text-rose-600"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <p class="text-xs text-gray-500 font-medium mb-1">SUH 랜덤</p>
                    <p class="text-lg font-bold text-gray-900" id="stat-total-suh-random">-</p>
                    <p class="text-xs text-gray-400">오늘: <span id="stat-today-suh-random" class="text-green-600 font-medium">+0</span></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Task D-Day 섹션 -->
    <section id="task-dday-section" class="mb-8">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-800">
          <i class="fa-solid fa-bullseye text-indigo-500 mr-2"></i>
          Task D-Day
        </h2>
        <a href="/task-tracker" class="text-sm text-gray-500 hover:text-primary transition-colors">
          전체보기 <i class="fa-solid fa-chevron-right text-xs"></i>
        </a>
      </div>

      <!-- 스켈레톤 -->
      <div id="task-dday-skeleton" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div class="card bg-base-100 border border-gray-100 shadow-sm p-4" th:each="i : ${#numbers.sequence(1, 3)}">
          <div class="flex items-center gap-4">
            <div class="skeleton w-14 h-14 rounded-lg"></div>
            <div class="flex-1">
              <div class="skeleton h-5 w-24 mb-2"></div>
              <div class="skeleton h-3 w-16 mb-1"></div>
              <div class="skeleton h-2 w-full"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- 실제 콘텐츠 -->
      <div id="task-dday-content" class="hidden">
        <div id="task-dday-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- JavaScript로 동적 생성 -->
        </div>

        <!-- 등록된 Task가 없을 때 -->
        <div id="task-dday-empty" class="hidden text-center py-8 bg-base-100 rounded-lg border border-gray-100">
          <i class="fa-solid fa-clipboard-list text-gray-300 text-4xl mb-3"></i>
          <p class="text-gray-500 mb-3">등록된 Task가 없습니다</p>
          <a href="/task-tracker" class="btn btn-primary btn-sm">Task 등록하기</a>
        </div>
      </div>
    </section>

    <!-- Dev Tools 섹션 -->
    <section class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <h2 class="card-title text-xl mb-4">
          <i class="fa-solid fa-wrench text-blue-500"></i>
          Dev Tools
        </h2>
        <p class="text-gray-500 text-sm mb-6">개발 유틸리티 도구 모음</p>

        <!-- Internal Tools -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-blue-500 pl-3">
            <i class="fa-solid fa-house text-blue-500"></i>
            Internal Tools
          </h3>
          <div class="dashboard-card-grid-4">
            <!-- 깃헙 이슈 도우미 -->
            <a href="/issue-helper" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <i class="fa-brands fa-github text-blue-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">이슈 도우미</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-info badge-xs">Utility</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">커밋, 브랜치 자동 생성</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">GitHub API</span>
                  <span class="badge badge-ghost badge-xs">Automation</span>
                </div>
              </div>
            </a>

            <!-- SUH-DEVOPS-TEMPLATE -->
            <a href="/suh-devops-template" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center">
                    <i class="fa-solid fa-gears text-gray-700 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">DevOps 템플릿</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Module</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">GitHub 자동화 템플릿</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">GitHub Actions</span>
                  <span class="badge badge-ghost badge-xs">CI/CD</span>
                </div>
              </div>
            </a>

            <!-- 컨테이너 로그 -->
            <a href="/docker-logs" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center">
                    <i class="fa-solid fa-terminal text-gray-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">컨테이너 로그</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-secondary badge-xs">Docker</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">실시간 로그 스트리밍</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Docker</span>
                  <span class="badge badge-ghost badge-xs">SSE</span>
                </div>
              </div>
            </a>

            <!-- AI 서버 관리 -->
            <a href="/ai-server" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <i class="fa-solid fa-server text-purple-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">AI 서버 관리</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-accent badge-xs">AI</span>
                    </div>
                  </div>
                </div>
                <div id="ai-server-status" class="flex items-center justify-between text-sm text-gray-500 mb-3 p-2 bg-gray-50 rounded-lg">
                  <span class="flex items-center gap-1">
                    <i class="fa-solid fa-signal"></i>
                    연결 상태
                  </span>
                  <span class="status-main-btn loading flex items-center gap-1 text-gray-400">
                    <span class="loading loading-spinner loading-xs"></span>
                    확인중
                  </span>
                </div>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Ollama</span>
                  <span class="badge badge-ghost badge-xs">LLM</span>
                </div>
              </div>
            </a>

            <!-- 커스텀 AI 번역기 -->
            <a href="/translator" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-indigo-100 flex items-center justify-center">
                    <i class="fa-solid fa-language text-indigo-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">AI 번역기</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-accent badge-xs">AI</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">커스텀 API 번역 서비스</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">OpenAI</span>
                  <span class="badge badge-ghost badge-xs">Translation</span>
                </div>
              </div>
            </a>

            <!-- 스터디 플랜 -->
            <a href="/study-management" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-teal-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-teal-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">스터디 플랜</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-success badge-xs">Notes</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">마크다운 지원 스터디 노트</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Markdown</span>
                  <span class="badge badge-ghost badge-xs">Notes</span>
                </div>
              </div>
            </a>

            <!-- 세종대 인증 -->
            <a href="/sejong-auth" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-indigo-100 flex items-center justify-center">
                    <i class="fa-solid fa-graduation-cap text-indigo-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">세종대 인증</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-primary badge-xs">Library</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">세종대학교 포털 인증 테스트</p>
                <div class="flex flex-wrap gap-1 mb-3">
                  <span class="badge badge-ghost badge-xs">Auth</span>
                  <span class="badge badge-ghost badge-xs">Sejong</span>
                </div>
                <div class="card-actions justify-end">
                  <span onclick="event.preventDefault(); window.open('https://github.com/Cassiiopeia/SUH-sejong-univ-auth', '_blank')" class="btn btn-outline btn-xs">
                    <i class="fa-brands fa-github"></i> GitHub
                  </span>
                </div>
              </div>
            </a>

            <!-- Grass Planter -->
            <a href="/grass" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center">
                    <i class="fa-solid fa-leaf text-emerald-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Grass Planter</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-success badge-xs">Scheduler</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">GitHub 자동 커밋 관리</p>
                <div class="flex flex-wrap gap-1 mb-3">
                  <span class="badge badge-ghost badge-xs">GitHub</span>
                  <span class="badge badge-ghost badge-xs">Scheduler</span>
                </div>
                <div class="card-actions justify-end">
                  <span onclick="event.preventDefault(); window.open('https://github.com/Cassiiopeia/suh-grass-planter', '_blank')" class="btn btn-outline btn-xs">
                    <i class="fa-brands fa-github"></i> GitHub
                  </span>
                </div>
              </div>
            </a>

            <!-- SUH 랜덤 엔진 -->
            <a href="/suh-random" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-rose-100 flex items-center justify-center">
                    <i class="fa-solid fa-dice text-rose-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">SUH 랜덤 엔진</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Library</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">랜덤 닉네임 & 가챠 시스템</p>
                <div class="flex flex-wrap gap-1 mb-3">
                  <span class="badge badge-ghost badge-xs">Random</span>
                  <span class="badge badge-ghost badge-xs">Gacha</span>
                </div>
                <div class="card-actions justify-end">
                  <span onclick="event.preventDefault(); window.open('https://github.com/Cassiiopeia/suh-random-engine', '_blank')" class="btn btn-outline btn-xs">
                    <i class="fa-brands fa-github"></i> GitHub
                  </span>
                </div>
              </div>
            </a>

            <!-- 버스 자동 예약 -->
            <a href="https://github.com/Cassiiopeia/auto-bus-reservation" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <i class="fa-solid fa-bus text-orange-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">버스 자동 예약</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Somansa</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">버스 자동 예약 시스템</p>
                <div class="flex flex-wrap gap-1 mb-3">
                  <span class="badge badge-ghost badge-xs">Automation</span>
                  <span class="badge badge-ghost badge-xs">Scheduler</span>
                </div>
                <div class="card-actions justify-end">
                  <span class="btn btn-outline btn-xs">
                    <i class="fa-brands fa-github"></i> GitHub
                  </span>
                </div>
              </div>
            </a>

            <!-- 챗봇 문서 관리 -->
            <a href="/chatbot-management" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-violet-100 flex items-center justify-center">
                    <i class="fa-solid fa-database text-violet-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">챗봇 문서 관리</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-accent badge-xs">RAG</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">RAG 챗봇 지식 문서 관리</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Qdrant</span>
                  <span class="badge badge-ghost badge-xs">Vector DB</span>
                </div>
              </div>
            </a>
          </div>
        </div>

        <!-- External Services -->
        <div class="bg-gray-50 rounded-xl p-5">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-yellow-500 pl-3">
            <i class="fa-solid fa-globe text-yellow-500"></i>
            External Services
          </h3>
          <div class="dashboard-card-grid-4">
            <!-- 원격 크롬 (JJ) -->
            <a href="https://web.suhsaechan.kr/" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-yellow-100 flex items-center justify-center">
                    <i class="fa-brands fa-chrome text-yellow-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">원격 크롬 (JJ)</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Remote</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">외부 크롬 원격 접속 (JJ 서버)</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Chrome</span>
                  <span class="badge badge-ghost badge-xs">Remote Desktop</span>
                </div>
              </div>
            </a>

            <!-- 원격 크롬 (House) -->
            <a href="https://chrome.suhsaechan.kr/" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center">
                    <i class="fa-brands fa-chrome text-amber-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">원격 크롬 (House)</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Remote</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">외부 크롬 원격 접속 (House 서버)</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Chrome</span>
                  <span class="badge badge-ghost badge-xs">Remote Desktop</span>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- AI Assistants 섹션 -->
    <section class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <h2 class="card-title text-xl mb-4">
          <i class="fa-solid fa-robot text-violet-500"></i>
          AI Assistants
        </h2>
        <p class="text-gray-500 text-sm mb-6">커스텀 ChatGPT 모델 모음</p>

        <!-- PROJECT GPT -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-blue-500 pl-3">
            <i class="fa-solid fa-code text-blue-500"></i>
            PROJECT GPT
          </h3>
          <div class="dashboard-card-grid-4">
            <!-- Swagger Docs 생성기 -->
            <a href="https://chatgpt.com/g/g-67a7a4cd31b48191a2396587469393d1-swaggerdocmaster" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <i class="fa-solid fa-file-code text-blue-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Swagger 생성기</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-info badge-xs">GPT</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">Controller, Service, Repo, Dto</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Swagger</span>
                  <span class="badge badge-ghost badge-xs">Documentation</span>
                </div>
              </div>
            </a>

            <!-- TypeScript API 변환기 -->
            <a href="https://chatgpt.com/g/g-67da95f653408191ac02737509ae51c7-taibseukeuribteu-api-taib-byeonhwangi" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-cyan-100 flex items-center justify-center">
                    <i class="fa-brands fa-js text-cyan-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">TS API 변환기</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-info badge-xs">GPT</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">Spring > TypeScript 변환</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">TypeScript</span>
                  <span class="badge badge-ghost badge-xs">Spring</span>
                </div>
              </div>
            </a>

            <!-- 변수명 초고수 변환기 -->
            <a href="https://chatgpt.com/g/g-67ee500ea598819188408e9e78a48c35-byeonsumyeong-co-jeonmunga" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center">
                    <i class="fa-solid fa-spell-check text-green-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">변수명 전문가</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-info badge-xs">GPT</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">변수명 확실하게 알려줌</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Naming</span>
                  <span class="badge badge-ghost badge-xs">Convention</span>
                </div>
              </div>
            </a>
          </div>
        </div>

        <!-- SOMANSA GPT -->
        <div class="bg-gray-50 rounded-xl p-5">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-orange-500 pl-3">
            <img src="/images/소만사_로고.png" alt="소만사" class="w-5 h-5">
            SOMANSA GPT
          </h3>
          <div class="dashboard-card-grid-4">
            <!-- CM Tag Creator -->
            <a href="https://chatgpt.com/g/g-67318f071e688190a355c62acf5033de-cm-taegeu-saengseonggi" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <img src="/images/소만사_로고.png" alt="소만사" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">CM Tag Creator</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Somansa</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">다국어 Tag Coder</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Tag</span>
                  <span class="badge badge-ghost badge-xs">i18n</span>
                </div>
              </div>
            </a>

            <!-- CM Branch Creator -->
            <a href="https://chatgpt.com/g/g-6732dd6bcb7481908383eadad53fef7a-cm-beuraencimyeong-saengseonggi" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <img src="/images/소만사_로고.png" alt="소만사" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">CM Branch Creator</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Somansa</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">일감 Info > 브랜치, 커밋</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Branch</span>
                  <span class="badge badge-ghost badge-xs">Commit</span>
                </div>
              </div>
            </a>

            <!-- Issue PPT Guide -->
            <a href="https://chatgpt.com/g/g-675a4ac37ae081918b3f3239c0432672-somansa-pptgyehoegseo-saengseonggi" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <img src="/images/소만사_로고.png" alt="소만사" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Issue PPT Guide</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Somansa</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">일감 Info > PPT Template</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">PPT</span>
                  <span class="badge badge-ghost badge-xs">Template</span>
                </div>
              </div>
            </a>

            <!-- SpringBooster -->
            <a href="https://chatgpt.com/g/g-67ce2f8e22808191a917c325d33b5e91-springbooster" target="_blank" rel="noopener noreferrer" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <img src="/images/소만사_로고.png" alt="소만사" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">SpringBooster</h3>
                    <div class="flex gap-1 mt-1">
                      <span class="badge badge-soft badge-warning badge-xs">Somansa</span>
                    </div>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mb-3">Spring Improve By PPT</p>
                <div class="flex flex-wrap gap-1">
                  <span class="badge badge-ghost badge-xs">Spring</span>
                  <span class="badge badge-ghost badge-xs">Improvement</span>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Server 섹션 (Synology) -->
    <section class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <h2 class="card-title text-xl mb-4">
          <i class="fa-solid fa-hard-drive text-orange-500"></i>
          Server
        </h2>
        <p class="text-gray-500 text-sm mb-6">시놀로지 NAS 서버 바로가기</p>

        <div class="dashboard-card-grid-4">
          <!-- Server (DSM) -->
          <a href="https://server.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                  <i class="fa-solid fa-server text-orange-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">Server (DSM)</h3>
                  <span class="badge badge-soft badge-warning badge-xs">NAS</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">시놀로지 DSM</p>
            </div>
          </a>
          <!-- Note Station -->
          <a href="https://note.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
                  <i class="fa-solid fa-sticky-note text-orange-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">Note Station</h3>
                  <span class="badge badge-soft badge-warning badge-xs">Note</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">시놀로지 노트</p>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- Services 섹션 (Infrastructure) -->
    <section class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <h2 class="card-title text-xl mb-4">
          <i class="fa-solid fa-cube text-cyan-500"></i>
          Services
        </h2>
        <p class="text-gray-500 text-sm mb-6">인프라 서비스 바로가기</p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <!-- Nexus -->
          <a href="https://nexus.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <i class="fa-solid fa-box-archive text-cyan-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">Nexus</h3>
                  <span class="badge badge-soft badge-info badge-xs">Repository</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">Maven/Docker Repository</p>
            </div>
          </a>
          <!-- Qdrant -->
          <a href="https://qdrant.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <i class="fa-solid fa-database text-cyan-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">Qdrant</h3>
                  <span class="badge badge-soft badge-info badge-xs">VectorDB</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">벡터 DB 대시보드</p>
            </div>
          </a>
          <!-- RabbitMQ -->
          <a href="https://rabbitmq.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <i class="fa-solid fa-envelope text-cyan-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">RabbitMQ</h3>
                  <span class="badge badge-soft badge-info badge-xs">MQ</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">메시지 큐 대시보드</p>
            </div>
          </a>
          <!-- Traefik -->
          <a href="https://traefik.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
             class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
            <div class="card-body p-5">
              <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-lg bg-cyan-100 flex items-center justify-center">
                  <i class="fa-solid fa-network-wired text-cyan-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900">Traefik</h3>
                  <span class="badge badge-soft badge-info badge-xs">Proxy</span>
                </div>
              </div>
              <p class="text-gray-500 text-sm mt-3">리버스 프록시 대시보드</p>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- Projects 섹션 -->
    <section class="card bg-white shadow-sm mb-8">
      <div class="card-body">
        <h2 class="card-title text-xl mb-4">
          <i class="fa-solid fa-folder-open text-amber-500"></i>
          Projects
        </h2>
        <p class="text-gray-500 text-sm mb-6">진행 중인 프로젝트 및 관련 리소스</p>

        <!-- Mapsy -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-emerald-500 pl-3">
            <i class="fa-solid fa-map-location-dot text-emerald-500"></i>
            Mapsy
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- 메인 페이지 -->
            <a href="https://mapsy.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center">
                    <i class="fa-solid fa-globe text-emerald-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">메인 페이지</h3>
                    <span class="badge badge-soft badge-info badge-xs">FE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Mapsy 메인 페이지</p>
              </div>
            </a>
            <!-- AI 서비스 -->
            <a href="https://ai.mapsy.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center">
                    <i class="fa-solid fa-brain text-emerald-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">AI 서비스</h3>
                    <span class="badge badge-soft badge-success badge-xs">AI</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Mapsy AI 서비스</p>
              </div>
            </a>
            <!-- API 문서 -->
            <a href="https://api.mapsy.suhsaechan.kr" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-emerald-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">API 문서</h3>
                    <span class="badge badge-soft badge-success badge-xs">BE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Mapsy API 문서</p>
              </div>
            </a>
          </div>
        </div>

        <!-- SEJONG-MALSAMI -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-blue-500 pl-3">
            <img src="/images/세종말싸미_로고.png" alt="세종말싸미" class="w-5 h-5">
            SEJONG-MALSAMI
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- 메인 페이지 -->
            <a href="https://test.sejong-malsami.co.kr" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <i class="fa-solid fa-globe text-blue-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">메인 페이지</h3>
                    <span class="badge badge-soft badge-info badge-xs">FE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">세종말싸미 메인 페이지</p>
              </div>
            </a>
            <!-- Swagger Docs -->
            <a href="https://api.sejong-malsami.co.kr/docs/swagger-ui/index.html#/" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-blue-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Swagger Docs</h3>
                    <span class="badge badge-soft badge-success badge-xs">BE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">세종말싸미 API 문서</p>
              </div>
            </a>
            <!-- 관리자 페이지 -->
            <a href="https://api.sejong-malsami.co.kr" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <i class="fa-solid fa-user-shield text-blue-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">관리자 페이지</h3>
                    <span class="badge badge-soft badge-warning badge-xs">Admin</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">세종말싸미 관리자</p>
              </div>
            </a>
            <!-- Figma -->
            <a href="https://www.figma.com/design/VS4dBkfhfEmqjHbuei011e/" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <img src="/icons/figmaLogo.svg" alt="Figma" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Figma</h3>
                    <span class="badge badge-soft badge-secondary badge-xs">Design</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">세종말싸미 디자인</p>
              </div>
            </a>
          </div>
        </div>

        <!-- PLANE ACCIDENT FINDER -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-amber-500 pl-3">
            <img src="/images/PLANE_ACCIDENT_FINDER_로고.png" alt="PLANE" class="w-5 h-5">
            PLANE ACCIDENT FINDER
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- DOWNLOAD APK -->
            <a href="http://suh-project.synology.me/plane-accident-finder/" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center">
                    <i class="fa-solid fa-download text-amber-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">DOWNLOAD APK</h3>
                    <span class="badge badge-soft badge-warning badge-xs">APK</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">APK Download Page</p>
              </div>
            </a>
            <!-- API 문서 -->
            <a href="https://api.romrom.xyz/docs/swagger-ui/index.html" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-amber-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">API 문서</h3>
                    <span class="badge badge-soft badge-success badge-xs">BE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Swagger Docs</p>
              </div>
            </a>
          </div>
        </div>

        <!-- ROM ROM -->
        <div class="bg-gray-50 rounded-xl p-5 mb-6">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-pink-500 pl-3">
            <img src="/images/ROMROM_로고.png" alt="ROM ROM" class="w-5 h-5">
            ROM ROM
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- DOWNLOAD APK -->
            <a href="https://suh-project.synology.me/romrom" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-pink-100 flex items-center justify-center">
                    <i class="fa-solid fa-download text-pink-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">DOWNLOAD APK</h3>
                    <span class="badge badge-soft badge-warning badge-xs">APK</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">롬롬 안드로이드 앱</p>
              </div>
            </a>
            <!-- API 문서 -->
            <a href="https://api.romrom.xyz/docs/swagger-ui/index.html" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-pink-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-pink-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">API 문서</h3>
                    <span class="badge badge-soft badge-success badge-xs">BE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Swagger Docs</p>
              </div>
            </a>
            <!-- Figma -->
            <a href="https://www.figma.com/design/dq4HUUqmTlVkmWr4cd2RE5/" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <img src="/icons/figmaLogo.svg" alt="Figma" class="w-7 h-7">
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Figma</h3>
                    <span class="badge badge-soft badge-secondary badge-xs">Design</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">롬롬 디자인</p>
              </div>
            </a>
          </div>
        </div>

        <!-- Re: WAVE -->
        <div class="bg-gray-50 rounded-xl p-5">
          <h3 class="font-semibold text-gray-800 mb-4 flex items-center gap-2 border-l-4 border-purple-500 pl-3">
            <i class="fa-solid fa-water text-purple-500"></i>
            Re: WAVE : 선택의 순간, 그녀의 운명이 갈린다
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <!-- Bagel-FE -->
            <a href="https://bagel.suhsaechan.kr/" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <i class="fa-solid fa-desktop text-purple-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Bagel-FE</h3>
                    <span class="badge badge-soft badge-info badge-xs">FE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Team Bagel 프론트엔드</p>
              </div>
            </a>
            <!-- Bagel-BE -->
            <a href="https://api.bagel.suhsaechan.kr/docs/swagger" target="_blank" rel="noopener noreferrer"
               class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-200">
              <div class="card-body p-5">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <i class="fa-solid fa-book text-purple-600 text-xl"></i>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Bagel-BE</h3>
                    <span class="badge badge-soft badge-success badge-xs">BE</span>
                  </div>
                </div>
                <p class="text-gray-500 text-sm mt-3">Team Bagel API 문서</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>

<!-- 공지사항 상세 모달 -->
<dialog id="notice-detail-modal" class="modal">
  <div class="modal-box max-w-2xl">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </form>
    <h3 class="font-bold text-lg mb-4" id="modal-notice-title"></h3>

    <div class="grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4">
      <p><i class="fa-solid fa-user mr-2"></i><span id="modal-notice-author"></span></p>
      <p><i class="fa-solid fa-calendar mr-2"></i><span id="modal-notice-date"></span></p>
      <p><i class="fa-solid fa-eye mr-2"></i>조회수: <span id="modal-notice-views"></span></p>
      <p id="modal-notice-important" class="hidden text-red-500">
        <i class="fa-solid fa-exclamation-circle mr-2"></i><strong>중요 공지사항</strong>
      </p>
    </div>

    <div class="divider"></div>
    <div class="prose max-w-none" id="modal-notice-content"></div>

    <!-- 댓글 섹션 -->
    <div class="divider"></div>
    <h4 class="font-semibold mb-4"><i class="fa-solid fa-comments mr-2"></i>댓글</h4>

    <div id="comment-list" class="space-y-3 mb-4">
      <div id="comments-loading" class="flex justify-center py-4">
        <span class="loading loading-spinner loading-md"></span>
      </div>
      <div id="no-comments-message" class="hidden text-center text-gray-500 py-4">
        아직 댓글이 없습니다. 첫 번째 댓글을 작성해보세요!
      </div>
    </div>

    <!-- 댓글 작성 폼 -->
    <div class="bg-gray-50 rounded-lg p-4">
      <div class="form-control mb-3">
        <input type="text" id="comment-author" placeholder="이름을 입력하세요 (선택사항)" class="input input-sm w-full">
      </div>
      <div class="form-control mb-3">
        <textarea id="comment-content" class="textarea" rows="3" placeholder="댓글을 입력하세요"></textarea>
      </div>
      <button type="button" id="comment-submit" class="btn btn-primary btn-sm">
        <i class="fa-solid fa-pen mr-1"></i> 댓글 작성
      </button>
    </div>

    <div class="modal-action">
      <form method="dialog">
        <button class="btn btn-primary">확인</button>
      </form>
    </div>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>

<script>
  $(document).ready(function() {
    // 공지사항 로드
    loadActiveNotices();

    // 대시보드 Summary 로드
    loadDashboardSummary();

    // Task D-Day 로드
    loadTaskDDay();

    // 페이지 로딩 효과
    setTimeout(function() {
      document.getElementById('skeleton-container').classList.add('hidden');
      document.getElementById('real-content').classList.remove('hidden');
    }, 500);

  });

  // 숫자 포맷 함수 (1000 -> 1K, 1000000 -> 1M)
  function formatNumber(num) {
    if (num === null || num === undefined) return '0';
    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
    return num.toString();
  }

  // 토큰 포맷 함수
  function formatTokens(tokens) {
    if (tokens === null || tokens === undefined) return '0';
    if (tokens >= 1000000) return (tokens / 1000000).toFixed(1) + 'M';
    if (tokens >= 1000) return (tokens / 1000).toFixed(1) + 'K';
    return tokens.toString();
  }

  // 대시보드 Summary 로드 함수
  function loadDashboardSummary() {
    sendFormRequest(
      '/api/dashboard/summary',
      null,
      function(response) {
        if (response) {
          // 방문자 통계
          $('#stat-total-visitors').text(formatNumber(response.totalUniqueVisitors || 0));
          $('#stat-today-visitors').text('+' + formatNumber(response.todayUniqueVisitors || 0));

          // 챗봇 통계
          $('#stat-total-chats').text(formatNumber(response.totalChatMessages || 0));
          $('#stat-today-chats').text('+' + formatNumber(response.todayChatMessages || 0));

          // 토큰 사용량
          const totalTokens = (response.totalInputTokens || 0) + (response.totalOutputTokens || 0);
          const todayTokens = (response.todayInputTokens || 0) + (response.todayOutputTokens || 0);
          $('#stat-total-tokens').text(formatTokens(totalTokens));
          $('#stat-today-tokens').text('+' + formatTokens(todayTokens));

          // 페이지 조회수
          $('#stat-total-page-views').text(formatNumber(response.totalPageViews || 0));
          $('#stat-today-page-views').text('+' + formatNumber(response.todayPageViews || 0));
          $('#stat-total-profile-views').text(formatNumber(response.totalProfileViews || 0));
          $('#stat-today-profile-views').text('+' + formatNumber(response.todayProfileViews || 0));

          // 세종대 인증 통계
          $('#stat-total-sejong-auth').text(formatNumber(response.totalSejongAuth || 0));
          $('#stat-today-sejong-auth').text('+' + formatNumber(response.todaySejongAuth || 0));

          // SUH 랜덤 통계
          if (response.featureUsageCounts && response.featureUsageCounts['SUH_RANDOM']) {
            $('#stat-total-suh-random').text(formatNumber(response.featureUsageCounts['SUH_RANDOM']));
          } else {
            $('#stat-total-suh-random').text('0');
          }
          if (response.todayFeatureUsageCounts && response.todayFeatureUsageCounts['SUH_RANDOM']) {
            $('#stat-today-suh-random').text('+' + formatNumber(response.todayFeatureUsageCounts['SUH_RANDOM']));
          } else {
            $('#stat-today-suh-random').text('+0');
          }

          // 스켈레톤 숨기고 실제 콘텐츠 표시
          $('#summary-skeleton').addClass('hidden');
          $('#summary-content').removeClass('hidden');
        }
      },
      function(xhr, status, error) {
        console.error('대시보드 Summary 로드 오류:', error);
        // 전역 핸들러가 toast를 표시하므로 여기서는 UI 업데이트만
        // 에러 시에도 스켈레톤 숨기고 기본값 표시
        $('#summary-skeleton').addClass('hidden');
        $('#summary-content').removeClass('hidden');
      }
    );
  }

  // 대시보드 Summary 새로고침 함수 (캐시 무효화)
  function refreshDashboardSummary() {
    const refreshBtn = $('#refresh-summary-btn');
    const icon = refreshBtn.find('i');

    // 버튼 비활성화 및 회전 애니메이션
    refreshBtn.prop('disabled', true);
    icon.addClass('animate-spin');

    sendFormRequest(
      '/api/dashboard/summary/refresh',
      null,
      function(response) {
        if (response) {
          // 방문자 통계
          $('#stat-total-visitors').text(formatNumber(response.totalUniqueVisitors || 0));
          $('#stat-today-visitors').text('+' + formatNumber(response.todayUniqueVisitors || 0));

          // 챗봇 통계
          $('#stat-total-chats').text(formatNumber(response.totalChatMessages || 0));
          $('#stat-today-chats').text('+' + formatNumber(response.todayChatMessages || 0));

          // 토큰 사용량
          const totalTokens = (response.totalInputTokens || 0) + (response.totalOutputTokens || 0);
          const todayTokens = (response.todayInputTokens || 0) + (response.todayOutputTokens || 0);
          $('#stat-total-tokens').text(formatTokens(totalTokens));
          $('#stat-today-tokens').text('+' + formatTokens(todayTokens));

          // 페이지 조회수
          $('#stat-total-page-views').text(formatNumber(response.totalPageViews || 0));
          $('#stat-today-page-views').text('+' + formatNumber(response.todayPageViews || 0));
          $('#stat-total-profile-views').text(formatNumber(response.totalProfileViews || 0));
          $('#stat-today-profile-views').text('+' + formatNumber(response.todayProfileViews || 0));

          // 세종대 인증 통계
          $('#stat-total-sejong-auth').text(formatNumber(response.totalSejongAuth || 0));
          $('#stat-today-sejong-auth').text('+' + formatNumber(response.todaySejongAuth || 0));

          // SUH 랜덤 통계
          if (response.featureUsageCounts && response.featureUsageCounts['SUH_RANDOM']) {
            $('#stat-total-suh-random').text(formatNumber(response.featureUsageCounts['SUH_RANDOM']));
          } else {
            $('#stat-total-suh-random').text('0');
          }
          if (response.todayFeatureUsageCounts && response.todayFeatureUsageCounts['SUH_RANDOM']) {
            $('#stat-today-suh-random').text('+' + formatNumber(response.todayFeatureUsageCounts['SUH_RANDOM']));
          } else {
            $('#stat-today-suh-random').text('+0');
          }
        }
        // 버튼 복구
        refreshBtn.prop('disabled', false);
        icon.removeClass('animate-spin');
      },
      function(xhr, status, error) {
        console.error('대시보드 Summary 새로고침 오류:', error);
        // 전역 핸들러가 toast를 표시하므로 여기서는 버튼 상태 복구만
        refreshBtn.prop('disabled', false);
        icon.removeClass('animate-spin');
      }
    );
  }

  // 전역 변수 - 공지사항 슬라이드 상태
  let noticeData = [];
  let currentNoticeIndex = 0;
  let noticeInterval = null;

  // 활성화된 공지사항 로드 함수
  function loadActiveNotices() {
    sendFormRequest(
      '/api/notice/get/active',
      null,
      function(response) {
        if (response && response.notices && response.notices.length > 0) {
          // 중요 공지 우선, 그 다음 최신순 정렬
          noticeData = response.notices.sort(function(a, b) {
            if (a.isImportant && !b.isImportant) return -1;
            if (!a.isImportant && b.isImportant) return 1;
            return new Date(b.createdDate) - new Date(a.createdDate);
          });

          initNoticeCards();
        } else {
          // 공지사항 없음
          $('#notice-cards').html('<div class="absolute inset-0 flex items-center justify-center"><span class="text-gray-400 text-sm">공지사항 없음</span></div>');
        }
      },
      function(xhr, status, error) {
        console.error('공지사항 로드 오류:', error);
        // 전역 핸들러가 toast를 표시하므로 여기서는 UI 업데이트만
        $('#notice-cards').html('<div class="absolute inset-0 flex items-center justify-center"><span class="text-red-500 text-sm">로드 실패</span></div>');
      }
    );
  }

  // 카드 초기화
  function initNoticeCards() {
    const container = $('#notice-cards');
    container.empty();

    // 모든 카드 생성
    noticeData.forEach(function(notice, index) {
      const importantBadge = notice.isImportant
        ? '<span class="badge badge-soft badge-error badge-xs mr-2">중요</span>'
        : '';

      const dateFormatted = formatNoticeDate(notice.createdDate);
      const viewCount = notice.viewCount || 0;

      const card = $(`
        <div class="notice-card ${index === 0 ? 'active' : ''}" data-notice-id="${notice.noticeId}">
          <i class="fa-solid fa-bullhorn text-blue-500 mr-2"></i>
          ${importantBadge}
          <span class="notice-title truncate">${notice.title}</span>
          <span class="notice-meta">
            <span class="notice-dot">·</span>
            <span>${dateFormatted}</span>
            <span class="notice-dot">·</span>
            <span>조회 ${formatNumber(viewCount)}</span>
          </span>
        </div>
      `);

      // 클릭 시 모달 열기
      card.click(function() {
        pauseNoticeSlide();
        showNoticeDetail(notice.noticeId);
      });

      container.append(card);
    });

    // 2개 이상일 때만 자동 슬라이드
    if (noticeData.length > 1) {
      startNoticeSlide();
    }
  }

  // 공지사항 날짜 포맷 함수
  function formatNoticeDate(dateString) {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString('ko-KR', {
      month: 'short',
      day: 'numeric'
    });
  }

  // 슬라이드 시작
  function startNoticeSlide() {
    noticeInterval = setInterval(function() {
      slideToNext();
    }, 5000); // 5초
  }

  // 다음 카드로 슬라이드
  function slideToNext() {
    const cards = $('.notice-card');
    const currentCard = cards.eq(currentNoticeIndex);

    // 다음 인덱스 계산 (순환)
    currentNoticeIndex = (currentNoticeIndex + 1) % noticeData.length;
    const nextCard = cards.eq(currentNoticeIndex);

    // 1. 현재 카드 → 위로 사라짐
    currentCard.removeClass('active').addClass('exit');

    // 2. 다음 카드 → 아래에서 올라옴
    nextCard.removeClass('exit').addClass('active');

    // 3. 600ms 후 exit 클래스 제거 (순환 준비)
    setTimeout(function() {
      currentCard.removeClass('exit');
    }, 600);
  }

  // 슬라이드 일시정지
  function pauseNoticeSlide() {
    if (noticeInterval) {
      clearInterval(noticeInterval);
      noticeInterval = null;
    }
  }

  // 슬라이드 재개
  function resumeNoticeSlide() {
    if (!noticeInterval && noticeData.length > 1) {
      startNoticeSlide();
    }
  }

  // 호버 시 일시정지
  $('#notice-section').hover(
    function() { pauseNoticeSlide(); },
    function() { resumeNoticeSlide(); }
  );

  // 페이지 언로드 시 인터벌 정리
  $(window).on('beforeunload', function() {
    if (noticeInterval) {
      clearInterval(noticeInterval);
    }
  });

  // 공지사항 상세 보기 함수
  function showNoticeDetail(noticeId) {
    sendFormRequest(
      '/api/notice/get/detail',
      { noticeId: noticeId },
      function(response) {
        if (response) {
          const notice = response;

          $('#modal-notice-title').text(notice.title).data('id', notice.noticeId);
          $('#modal-notice-author').text(notice.author || '관리자');
          $('#modal-notice-date').text(new Date(notice.createdDate).toLocaleString());
          $('#modal-notice-views').text(notice.viewCount || 0);
          $('#modal-notice-content').html(notice.content.replace(/\n/g, '<br>'));

          if (notice.isImportant) {
            $('#modal-notice-important').removeClass('hidden');
          } else {
            $('#modal-notice-important').addClass('hidden');
          }

          loadComments(notice.noticeId);
          $('#comment-author').val('');
          $('#comment-content').val('');

          document.getElementById('notice-detail-modal').showModal();
        } else {
          alert('공지사항을 불러올 수 없습니다.');
        }
      },
      function(xhr, status, error) {
        console.error('공지사항 상세 조회 오류:', error);
        // 전역 핸들러가 toast를 표시함
      }
    );
  }

  // 댓글 목록 로드 함수
  function loadComments(noticeId) {
    $('#comments-loading').show();
    $('#comment-list .comment-item').remove();
    $('#no-comments-message').addClass('hidden');

    sendFormRequest(
      '/api/notice/comment/list',
      { noticeId: noticeId },
      function(response) {
        $('#comments-loading').hide();

        if (response && response.noticeCommentDtos && response.noticeCommentDtos.length > 0) {
          response.noticeCommentDtos.forEach(function(comment) {
            const commentHtml = createCommentHtml(comment);
            $('#comment-list').append(commentHtml);
          });

          $('.delete-comment-btn').click(function() {
            const commentId = $(this).data('id');
            if (confirm('정말로 이 댓글을 삭제하시겠습니까?')) {
              deleteComment(commentId, noticeId);
            }
          });
        } else {
          $('#no-comments-message').removeClass('hidden');
        }
      },
      function(xhr, status, error) {
        $('#comments-loading').hide();
        console.error('댓글 로드 오류:', error);
        // 전역 핸들러가 toast를 표시하므로 여기서는 UI 업데이트만
        $('#no-comments-message').removeClass('hidden').addClass('text-red-500').text('댓글을 불러오는 중 오류가 발생했습니다.');
      }
    );
  }

  // 댓글 HTML 생성 함수
  function createCommentHtml(comment) {
    const date = new Date(comment.createdDate).toLocaleString();
    const clientHashFromSession = getClientHashFromStorage();
    const isMyComment = clientHashFromSession && clientHashFromSession === comment.clientHash;

    const deleteButton = isMyComment ?
      `<button class="btn btn-ghost btn-xs text-red-500 delete-comment-btn" data-id="${comment.noticeCommentId}">
        <i class="fa-solid fa-trash"></i>
      </button>` : '';

    return `
      <div class="comment-item bg-gray-50 rounded-lg p-4 border border-gray-100">
        <div class="flex items-start gap-3">
          <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-500">
            <i class="fa-solid fa-user"></i>
          </div>
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <span class="font-semibold text-gray-900">${comment.author}</span>
              ${comment.anonymizedIp ? `<span class="text-gray-400 text-xs">(${comment.anonymizedIp})</span>` : ''}
              <span class="text-gray-400 text-xs">${date}</span>
            </div>
            <p class="text-gray-600 text-sm whitespace-pre-line">${comment.content}</p>
          </div>
          ${deleteButton}
        </div>
      </div>
    `;
  }

  // 클라이언트 해시값 가져오기
  function getClientHashFromStorage() {
    return sessionStorage.getItem('clientHash');
  }

  // 댓글 작성 이벤트
  $(document).on('click', '#comment-submit', function() {
    const noticeId = $('#modal-notice-title').data('id');
    const authorName = $('#comment-author').val() || '익명';
    const content = $('#comment-content').val();

    if (!content) {
      alert('댓글 내용을 입력해주세요.');
      return;
    }

    sendFormRequest(
      '/api/notice/comment/create',
      {
        noticeId: noticeId,
        commentAuthor: authorName,
        commentContent: content
      },
      function(response) {
        if (response) {
          $('#comment-content').val('');
          loadComments(noticeId);
        } else {
          alert('댓글 등록 실패');
        }
      },
      function(xhr, status, error) {
        alert('댓글 등록 오류: ' + error);
      }
    );
  });

  // 댓글 삭제 함수
  function deleteComment(commentId, noticeId) {
    sendFormRequest(
      '/api/notice/comment/delete',
      { commentId: commentId },
      function(response) {
        if (response) {
          loadComments(noticeId);
        } else {
          alert('댓글 삭제 실패');
        }
      },
      function(xhr, status, error) {
        alert('댓글 삭제 오류: ' + error);
      }
    );
  }

  // Task D-Day 로드 함수
  function loadTaskDDay() {
    sendFormRequest(
      '/api/task/goal/list',
      null,
      function(response) {
        $('#task-dday-skeleton').addClass('hidden');
        $('#task-dday-content').removeClass('hidden');

        if (response && response.goals && response.goals.length > 0) {
          const cardsContainer = $('#task-dday-cards');
          cardsContainer.empty();

          const activeGoals = response.goals.filter(function(task) {
            return task.isActive && !task.isCompleted;
          });

          if (activeGoals.length > 0) {
            activeGoals.forEach(function(task) {
              cardsContainer.append(renderTaskDDayCard(task));
            });
            $('#task-dday-empty').addClass('hidden');
          } else {
            $('#task-dday-cards').addClass('hidden');
            $('#task-dday-empty').removeClass('hidden');
          }
        } else {
          $('#task-dday-cards').addClass('hidden');
          $('#task-dday-empty').removeClass('hidden');
        }
      },
      function(xhr, status, error) {
        console.error('Task D-Day 로드 오류:', error);
        $('#task-dday-skeleton').addClass('hidden');
        $('#task-dday-content').removeClass('hidden');
        $('#task-dday-cards').addClass('hidden');
        $('#task-dday-empty').removeClass('hidden');
      }
    );
  }

  // Task D-Day 카드 렌더링 함수
  function renderTaskDDayCard(task) {
    const daysRemaining = task.daysRemaining;
    let ddayText, ddayClass;

    if (daysRemaining < 0) {
      ddayText = 'D+' + Math.abs(daysRemaining);
      ddayClass = 'text-gray-400';
    } else if (daysRemaining === 0) {
      ddayText = 'D-Day';
      ddayClass = 'text-red-500 font-bold';
    } else if (daysRemaining <= 7) {
      ddayText = 'D-' + daysRemaining;
      ddayClass = 'text-red-500 font-bold';
    } else if (daysRemaining <= 30) {
      ddayText = 'D-' + daysRemaining;
      ddayClass = 'text-amber-500 font-semibold';
    } else {
      ddayText = 'D-' + daysRemaining;
      ddayClass = 'text-blue-500';
    }

    const targetDate = new Date(task.targetDate).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });

    const progressPercentage = task.progressPercentage || 0;
    const currentAmount = task.currentAmount || 0;
    const totalAmount = task.totalAmount || 0;
    const unit = task.unit || '';

    let progressHtml = '';
    if (totalAmount > 0) {
      progressHtml = `
        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
          <div class="bg-blue-500 h-1.5 rounded-full" style="width: ${Math.min(progressPercentage, 100)}%"></div>
        </div>
        <p class="text-xs text-gray-400 mt-1">${currentAmount}/${totalAmount} ${unit} (${progressPercentage.toFixed(0)}%)</p>
      `;
    }

    return `
      <a href="/task-tracker?id=${task.taskGoalId}" class="card bg-base-100 border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
        <div class="card-body p-4">
          <div class="flex items-center gap-4">
            <div class="w-14 h-14 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0">
              <i class="${task.icon || 'fa-solid fa-bullseye'} text-blue-600 text-xl"></i>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="font-bold text-gray-900 truncate">${task.title}</h3>
                <span class="${ddayClass} text-lg ml-2">${ddayText}</span>
              </div>
              <p class="text-xs text-gray-500">${targetDate}</p>
              ${progressHtml}
            </div>
          </div>
        </div>
      </a>
    `;
  }

  // AI 서버 상태 로드
  function loadAiServerStatus() {
    const formData = new FormData();

    $.ajax({
      url: '/api/ai-server/health',
      method: 'POST',
      data: formData,
      processData: false,
      contentType: false,
      success: function(response) {
        const statusContainer = $('#ai-server-status');
        const statusBtn = statusContainer.find('.status-main-btn');

        if (response.isHealthy) {
          statusBtn.removeClass('loading text-gray-400').addClass('text-green-500');
          statusBtn.html('<i class="fa-solid fa-check-circle"></i> 정상');
        } else {
          statusBtn.removeClass('loading text-gray-400').addClass('text-red-500');
          statusBtn.html('<i class="fa-solid fa-times-circle"></i> 비정상');
        }
      },
      error: function() {
        // 전역 핸들러가 toast를 표시하므로 여기서는 상태 표시만
        const statusContainer = $('#ai-server-status');
        const statusBtn = statusContainer.find('.status-main-btn');

        statusBtn.removeClass('loading text-gray-400').addClass('text-yellow-500');
        statusBtn.html('<i class="fa-solid fa-exclamation-triangle"></i> 연결 오류');
      }
    });
  }

  // 페이지 로드 시 AI 서버 상태 확인
  $(document).ready(function() {
    setTimeout(function() {
      loadAiServerStatus();
    }, 1000);

    // 10분마다 AI 서버 상태 새로고침
    setInterval(loadAiServerStatus, 600000);
  });

</script>
</body>
</html>
